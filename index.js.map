{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '54459012-5e63b86c877094f2e2839be1c'; \n\nexport async function getImagesByQuery(query, page = 1) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 12,\n        page: page,\n    };\n\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n    }\n    catch (error) {\n        console.log(error);\n    }\n}","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector('.gallery');\nconst loaderContainer = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more')\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n});\n\nexport function createGallery(images) {\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img \n        class=\"gallery-image\" \n        src=\"${image.webformatURL}\" \n        alt=\"${image.tags}\" \n        loading=\"lazy\"\n        />\n        </a>\n        <div class=\"info\">\n        <p class=\"text-info\"><b>Likes:</b>${image.likes}</p>\n        <p class=\"text-info\"><b>Views:</b>${image.views}</p>\n        <p class=\"text-info\"><b>Comments:</b>${image.comments}</p>\n        <p class=\"text-info\"><b>Downloads:</b>${image.downloads}</p>\n        </div>\n        </li>\n`).join('');\n\ngalleryList.insertAdjacentHTML('beforeend', markup);\nlightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryList.innerHTML = '';\n}\n\nexport function showLoader() {\n    loaderContainer.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n    loaderContainer.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add('is-hidden');\n}","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', loadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  const query = event.target.elements['search-text'].value.trim();\n  if (!query) {\n    iziToast.error({ \n        message: 'Please enter a search query!', \n        position: 'topRight' });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query.',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        progressBar:'#B51B1B',\n        messageColor: '#FFFFFF',\n      });\n      return;\n    }\n\n    createGallery(data.hits);\n\n    if (totalHits > 15) showLoadMoreButton();\n\n  } catch (error) {\n    iziToast.error({ message: 'Something went wrong. Please try again later.', position: 'topRight' });\n    console.error(error);\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\n\nasync function loadMore() {\n  currentPage += 1;\n  showLoader();\n  hideLoadMoreButton();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    createGallery(data.hits);\n\n    const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n\n    if (currentPage * 15 >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\", position: 'topRight' });\n    } else {\n      showLoadMoreButton();\n    }\n\n  } catch (error) {\n    iziToast.error({ message: 'Something went wrong. Please try again later.', position: 'topRight' });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","params","axios","error","galleryList","loaderContainer","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","currentQuery","currentPage","totalHits","onSearch","loadMore","event","iziToast","data","cardHeight"],"mappings":"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"}